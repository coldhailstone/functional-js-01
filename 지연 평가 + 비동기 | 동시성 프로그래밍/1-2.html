<script src="../lib/fx.js"></script>

## 지연된 함수열을 병렬적으로 평가하기 - C.reduce, C.take
<script>
    const C = {};
    function noop() {}
    const catchNoop = arr =>
        (arr.forEach(a => a instanceof Promise ? a.catch(noop) : a), arr);

    C.reduce = curry((f, acc, iter) => {
        let iter2 = catchNoop(iter ? [...iter] : [...acc]);
        return iter 
            ? reduce(f, acc, iter2)
            : reduce(f, iter2);
    });

    C.take = curry((l, iter) => take(l, catchNoop([...iter])));

    const delay500 = a => new Promise(resolve =>
        setTimeout(() => resolve(a), 500));

    console.time('');
    go(
        [1, 2, 3, 4, 5, 7, 8, 9],
        L.map(a => delay500(a * a)),
        L.filter(a => delay500(a % 2)),
        L.map(a => delay500(a * a)),
        // C.take(2),
        C.reduce(add),
        log,
        _ => console.timeEnd('')
    );
</script>